---
sidebar_position: 8
---

import { Fail } from '@site/src/components/fail.js'
import { Todo } from '@site/src/components/todo.js'
import { Improve } from '@site/src/components/improve.js'
import { Stars } from '@site/src/components/stars.js'


# Google Closure
Google Closure is a stdlib, type system and compiler. Stdlib contains utils and UI. Type system is JSDoc based, so code remains valid JS. And authors claim the compiler does amazing minification, but that remains to be seen.

The documentation of GC is a big mess. Something is in official doc, something on Github, something on Discuss, something in `compiler.jar --help`.

**Root links**:
- [Official doc](https://developers.google.com/closure/compiler)
- [Github wiki](https://github.com/google/closure-compiler/wiki)
- [Google groups issues](https://groups.google.com/g/closure-compiler-discuss)
- [Github issues](https://github.com/google/closure-compiler/issues)

**Useful direct links**:
- [GCC JAR download](https://mvnrepository.com/artifact/com.google.javascript/closure-compiler)
- [List of GC type annotations](https://github.com/google/closure-compiler/wiki/Annotating-JavaScript-for-the-Closure-Compiler)
- [GC type system explained](https://github.com/google/closure-compiler/wiki#typing)
- [GC compiler flags](https://github.com/google/closure-compiler/wiki/Flags-and-Options)
- [@suppression groups](https://github.com/google/closure-compiler/wiki/@suppress-annotations)
- [GCC github](https://github.com/google/closure-compiler)

**TODO**
- github homepage https://github.com/google/closure-compiler
- GC blog http://closuretools.blogspot.com/2011/01/property-by-any-other-name-part-3.html
- Discuss

## Stdlib
<Todo>What is in there</Todo>

## Type system
The type system is based on JSDoc. In essence if you use `strictCheckTypes` compiler flag, it resembles Typescript, but it is pretty buggy and needs much more boilerplate. **Without the strictness it is just a big mess.**

Sadly it lacks [Type Utilities](https://www.typescriptlang.org/docs/handbook/utility-types.html) that I love from TS (such as `ReturnType`, etc).

[Read all about it.](./types/types-index)

<Fail>The type system is buggy, I have personally reported 20 bugs.</Fail>

### Type inference
The type checking can do a little bit of type inference, but just a little bit. **It's strength is comparable to that of Flow**, but it is a far cry from Typescript. Here is a [little analysis](./type-inference).

<Fail>This means every variable, attribute, parameter and return type, everything has to be explicitly typed. That is a lot of boiler plate.</Fail>

### IDE support
<Fail>There is not IDE support.</Fail>

#### IDE support workaround
As a workaround I use JSDoc-based Typescript checking plus a bit of `@ts-ignore`.

It is better than nothing, but it is not ideal. The type systems are different they raise different sets of errors. One is not a subset of the other. In general Typescript is stronger, especially with respect to type inference. 

<Fail>So with every commit I make, I always have to validate it with GCC and I can expect errors.</Fail>

## Compiler
The compiler is trying to do the same job as let's say Webpack with a type checking loader. But Webpack is much superior in all aspects, maybe except minification, but that is not certain.

[Read all about the compiler.](./compiler/index-compiler)


# TODO
1. Try to convert to TS JSDoc + ts-loader + webpack workflow
   1. [intro](https://www.typescriptlang.org/docs/handbook/type-checking-javascript-files.html)
   2. [reference](https://www.typescriptlang.org/docs/handbook/jsdoc-supported-types.html#unsupported-tags)
   3. List all the advantages that this will bring
   4. How to mix .ts and .jsdoc files in one build process?
2. Compare webpack and GCC

# TODO
1. Finish WIP
   1. GC by default allows access to [subcalss props but they are unknown (only old style defined calsses such as Element) ](https://github.com/google/closure-compiler/wiki/Conformance:-Sources-of-%22unknown%22) is a similar fashion it allows access to any attributes of union type but they are unkown as well
   2. TODO Object spread does not type check - https://github.com/google/closure-compiler/issues/3132
2. How to import libraries?
3. pollyfills
4. Read again and discuss all compiler flags
5. Read all wiki pages (71) https://github.com/google/closure-compiler/wiki
6. Read community https://developers.google.com/closure/compiler/community


## TODO details
1. Ultra special types https://github.com/google/closure-compiler/wiki/Special-types-in-the-Closure-Type-System
4. it looks like + can be used on anything (it calls .toString()) e.g. Promise.resolve() + 7
2 using obejct as a map is a problem https://github.com/google/closure-compiler/wiki/Conformance:-Sources-of-%22unknown%22#using-an-object-as-a-map
1. do generics have to be declared explicitly? https://github.com/google/closure-compiler/wiki/Conformance:-Sources-of-%22unknown%22#unspecified-generic-types 
